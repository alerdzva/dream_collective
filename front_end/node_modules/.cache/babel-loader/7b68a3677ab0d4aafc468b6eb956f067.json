{"ast":null,"code":"import _slicedToArray from \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/src/components/commons/auth/AuthForm.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  width: 40vw;\\n  top: 5vw;\\n  height: 50vw;\\n  left: 30vw;\\n  border: solid 4px \", \";\\n  z-index: 300;\\n  background-color: \", \";\\n  margin-bottom: 10vw;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { theme } from \"../../../config/colorTheme\";\nimport Amplify, { Auth } from \"aws-amplify\";\nimport { AmplifyAuthenticator, AmplifySignUp, AmplifySignIn, AmplifySignOut } from \"@aws-amplify/ui-react\";\nconst Container = styled.div(_templateObject(), theme.secondaryColor, theme.white);\n\nvar APICalls = require(\"../../../utils/APICalls\"); //confirmSignUp\n\n\nexport default function AuthForm(props) {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        authState = _useState2[0],\n        setauthState = _useState2[1];\n\n  const handleAuthChange = async (nextAuthState, data) => {\n    setauthState(nextAuthState);\n    data && data.username && nextAuthState == \"signedin\" && authState != nextAuthState && APICalls.readUserByCognitoUsername(data.username, userData => {\n      if (!userData || !userData._id) {\n        APICalls.createNewUser({\n          cognito_username: data.username,\n          email: data.attributes.email\n        }, newUserData => {\n          alert(\"1111\");\n          props.onUserAvailable(newUserData);\n        });\n      } else {\n        alert(\"33333\");\n        props.onUserAvailable(userData);\n      }\n    });\n  };\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(AmplifyAuthenticator, {\n    usernameAlias: \"email\",\n    handleAuthStateChange: (nextAuthState, data) => handleAuthChange(nextAuthState, data),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(AmplifySignUp, {\n    slot: \"sign-up\",\n    usernameAlias: \"email\",\n    formFields: [{\n      type: \"email\",\n      label: \"Email Address\",\n      required: true\n    }, {\n      type: \"password\",\n      label: \"Password\",\n      required: true\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(AmplifySignIn, {\n    slot: \"sign-in\",\n    usernameAlias: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/src/components/commons/auth/AuthForm.js"],"names":["React","useContext","useEffect","useState","styled","theme","Amplify","Auth","AmplifyAuthenticator","AmplifySignUp","AmplifySignIn","AmplifySignOut","Container","div","secondaryColor","white","APICalls","require","AuthForm","props","authState","setauthState","handleAuthChange","nextAuthState","data","username","readUserByCognitoUsername","userData","_id","createNewUser","cognito_username","email","attributes","newUserData","alert","onUserAvailable","type","label","required"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,KAAT,QAAsB,4BAAtB;AAEA,OAAOC,OAAP,IAAkBC,IAAlB,QAA8B,aAA9B;AACA,SACEC,oBADF,EAEEC,aAFF,EAGEC,aAHF,EAIEC,cAJF,QAKO,uBALP;AAOA,MAAMC,SAAS,GAAGR,MAAM,CAACS,GAAV,oBAMOR,KAAK,CAACS,cANb,EAQOT,KAAK,CAACU,KARb,CAAf;;AAYA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,yBAAD,CAAtB,C,CACA;;;AACA,eAAe,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AAAA,oBACJhB,QAAQ,CAAC,EAAD,CADJ;AAAA;AAAA,QAC/BiB,SAD+B;AAAA,QACpBC,YADoB;;AAEtC,QAAMC,gBAAgB,GAAG,OAAOC,aAAP,EAAsBC,IAAtB,KAA+B;AACtDH,IAAAA,YAAY,CAACE,aAAD,CAAZ;AACAC,IAAAA,IAAI,IACFA,IAAI,CAACC,QADP,IAEEF,aAAa,IAAI,UAFnB,IAGEH,SAAS,IAAIG,aAHf,IAIEP,QAAQ,CAACU,yBAAT,CAAmCF,IAAI,CAACC,QAAxC,EAAmDE,QAAD,IAAc;AAC9D,UAAI,CAACA,QAAD,IAAa,CAACA,QAAQ,CAACC,GAA3B,EAAgC;AAC9BZ,QAAAA,QAAQ,CAACa,aAAT,CACE;AAAEC,UAAAA,gBAAgB,EAAEN,IAAI,CAACC,QAAzB;AAAmCM,UAAAA,KAAK,EAAEP,IAAI,CAACQ,UAAL,CAAgBD;AAA1D,SADF,EAEGE,WAAD,IAAiB;AACfC,UAAAA,KAAK,CAAC,MAAD,CAAL;AACAf,UAAAA,KAAK,CAACgB,eAAN,CAAsBF,WAAtB;AACD,SALH;AAOD,OARD,MAQO;AACLC,QAAAA,KAAK,CAAC,OAAD,CAAL;AACAf,QAAAA,KAAK,CAACgB,eAAN,CAAsBR,QAAtB;AACD;AACF,KAbD,CAJF;AAkBD,GApBD;;AAqBA,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,oBAAD;AACE,IAAA,aAAa,EAAC,OADhB;AAEE,IAAA,qBAAqB,EAAE,CAACJ,aAAD,EAAgBC,IAAhB,KACrBF,gBAAgB,CAACC,aAAD,EAAgBC,IAAhB,CAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME,oBAAC,aAAD;AACE,IAAA,IAAI,EAAC,SADP;AAEE,IAAA,aAAa,EAAC,OAFhB;AAGE,IAAA,UAAU,EAAE,CACV;AACEY,MAAAA,IAAI,EAAE,OADR;AAEEC,MAAAA,KAAK,EAAE,eAFT;AAGEC,MAAAA,QAAQ,EAAE;AAHZ,KADU,EAMV;AACEF,MAAAA,IAAI,EAAE,UADR;AAEEC,MAAAA,KAAK,EAAE,UAFT;AAGEC,MAAAA,QAAQ,EAAE;AAHZ,KANU,CAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,EAsBE,oBAAC,aAAD;AAAe,IAAA,IAAI,EAAC,SAApB;AAA8B,IAAA,aAAa,EAAC,OAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBF,CADF,CADF;AA4BD","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { theme } from \"../../../config/colorTheme\";\n\nimport Amplify, { Auth } from \"aws-amplify\";\nimport {\n  AmplifyAuthenticator,\n  AmplifySignUp,\n  AmplifySignIn,\n  AmplifySignOut,\n} from \"@aws-amplify/ui-react\";\n\nconst Container = styled.div`\n  position: absolute;\n  width: 40vw;\n  top: 5vw;\n  height: 50vw;\n  left: 30vw;\n  border: solid 4px ${theme.secondaryColor};\n  z-index: 300;\n  background-color: ${theme.white};\n  margin-bottom: 10vw;\n`;\n\nvar APICalls = require(\"../../../utils/APICalls\");\n//confirmSignUp\nexport default function AuthForm(props) {\n  const [authState, setauthState] = useState(\"\");\n  const handleAuthChange = async (nextAuthState, data) => {\n    setauthState(nextAuthState);\n    data &&\n      data.username &&\n      nextAuthState == \"signedin\" &&\n      authState != nextAuthState &&\n      APICalls.readUserByCognitoUsername(data.username, (userData) => {\n        if (!userData || !userData._id) {\n          APICalls.createNewUser(\n            { cognito_username: data.username, email: data.attributes.email },\n            (newUserData) => {\n              alert(\"1111\");\n              props.onUserAvailable(newUserData);\n            }\n          );\n        } else {\n          alert(\"33333\");\n          props.onUserAvailable(userData);\n        }\n      });\n  };\n  return (\n    <Container>\n      <AmplifyAuthenticator\n        usernameAlias=\"email\"\n        handleAuthStateChange={(nextAuthState, data) =>\n          handleAuthChange(nextAuthState, data)\n        }\n      >\n        <AmplifySignUp\n          slot=\"sign-up\"\n          usernameAlias=\"email\"\n          formFields={[\n            {\n              type: \"email\",\n              label: \"Email Address\",\n              required: true,\n            },\n            {\n              type: \"password\",\n              label: \"Password\",\n              required: true,\n            },\n          ]}\n        />\n        <AmplifySignIn slot=\"sign-in\" usernameAlias=\"email\" />\n      </AmplifyAuthenticator>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}