{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/src/components/views/createTopic/SetupPromptsView.js\";\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  margin-bottom: 10vw;\\n  width: 50vw;\\n  margin: auto;\\n  justify-content: space-between;\\n\"]);\n\n  _templateObject5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 70%;\\n  margin: 3vw 0;\\n  font-size: \", \";\\n  font-family: \\\"Roboto\\\", serif;\\n  font-weight: \", \";\\n  color: \", \";\\n  width: 100%;\\n  text-align: left;\\n  background-color: \", \";\\n  padding: 3vw 2vw;\\n  transition: transform 0.2s;\\n  cursor: pointer;\\n\\n  &:hover {\\n    transform: scale(1.02);\\n  }\\n\"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n  margin: auto;\\n  display: flex;\\n  width: 70%;\\n  justify-content: space-between;\\n  margin-top: 3vw;\\n\"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n  margin: 5vw auto;\\n  position: relative;\\n  width: 90vw;\\n\\n  @media \", \" {\\n    flex-direction: column;\\n    height: auto;\\n  }\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  position: relative;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport styled, { ThemeConsumer } from \"styled-components\";\nimport LoadingWidget from \"../../LoadingWidget\";\nimport { devices } from \"../../../devices.js\";\nimport Header from \"../../commons/header/Header\";\nimport { theme } from \"../../../config/colorTheme\";\nimport Prompt from \"../../commons/Prompt\";\nimport TextArea from \"../../commons/TextArea\";\nimport Category from \"./Category\";\nimport Footer from \"../../commons/Footer\";\nimport NewFeature from \"../../feature/NewFeature\";\nimport NewPrompt from \"./NewPrompt\";\nimport Text from \"../../commons/Text\";\nimport MainHeader from \"../../commons/mainheader/MainHeader\";\nimport userInfoForm from \"../../userinfo/UserInfoForm\";\nimport UserInfoForm from \"../../userinfo/UserInfoForm\";\nimport AuthForm from \"../../commons/auth/AuthForm\";\nimport Button from \"../../commons/Button\";\nimport Amplify, { Auth } from \"aws-amplify\";\nconst Wrapper = styled.div(_templateObject());\nconst ContentWrapper = styled.div(_templateObject2(), devices.mobile);\nconst FeatureContainer = styled.div(_templateObject3());\nconst AddNewPrompt = styled.div(_templateObject4(), props => props.isSmall ? \"1.2vw\" : \"2vw\", props => props.isSmall ? \"300\" : \"700\", props => props.isDisabled ? theme.darkGray : theme.black, theme.lightGray);\nconst ButtonContainer = styled.div(_templateObject5());\nconst categories = [\"product\", \"space\", \"service\"];\n\nvar APICalls = require(\"../../../utils/APICalls\");\n\nclass SetupPromptsView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      topic: null,\n      prompts: [{\n        text: \"\",\n        startingLine: \"\",\n        showDialog: false,\n        showAuth: false\n      }]\n    };\n  }\n\n  componentDidMount() {\n    Auth.currentAuthenticatedUser().then(user => console.log(user));\n    window.scrollTo(0, 0);\n    APICalls.readTopic(this.props.match.params.id, data => this.setState({\n      topic: data\n    }));\n  }\n\n  render() {\n    if (this.state.topic == null) return React.createElement(LoadingWidget, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    });\n    const mainHelp = React.createElement(Text, {\n      text: \"Encourage participants to tell you a story on how they see this dream \" + this.state.topic.name + \" being used. What do you want them to tell you about their creations? Is it to be used by a specific person or group of people and in what context? What does \" + this.state.topic.name + \"enable them to do?\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    });\n    return React.createElement(Wrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, this.state.showDialog && React.createElement(UserInfoForm, {\n      user: this.state.topic.createdBy,\n      onClose: () => {\n        this.handlePublish();\n        this.setState({\n          showDialog: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), this.state.showAuth && React.createElement(AuthForm, {\n      onUserAvailable: userData => this.handleUserData(userData),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(MainHeader, {\n      isSmall: true,\n      onClick: () => this.props.history.push(\"../../\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(Header, {\n      text: \"Create prompts for people to tell you about their dream \" + this.state.topic.name,\n      helpBody: mainHelp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(ContentWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, this.state.prompts.map((item, key) => React.createElement(NewPrompt, {\n      index: key,\n      topicName: this.state.topic.name,\n      promptText: item.text,\n      startingLine: item.startingLine,\n      onPromptChange: (i, prompt) => this.handlePromptChange(i, prompt),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })), React.createElement(AddNewPrompt, {\n      onClick: () => this.addNewPrompt(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \" \", \"+ Add another prompt\")), this.state.prompts[0].text.length > 5 && React.createElement(ButtonContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Button, {\n      text: \"Publish as a guest\",\n      onClick: () => this.createUser(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(Button, {\n      text: \"Sign-in and Publish\",\n      onClick: () => this.setState({\n        showAuth: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    })));\n  }\n\n  handlePublish() {\n    this.state.prompts.map((value, index) => {\n      APICalls.createNewPrompt({\n        topic: this.state.topic._id,\n        text: value.text,\n        startingLine: value.startingLine\n      }, data => console.log(data));\n    });\n    var topic = this.state.topic;\n    topic.isPublished = true;\n    APICalls.updateTopic(topic._id, topic, data => {\n      alert(\"Project published!\");\n      window.scrollTo(0, 0);\n      this.props.history.push(\"/topic/\" + this.state.topic._id);\n      window.location.reload();\n    });\n  }\n\n  addNewPrompt() {\n    var prompts = this.state.prompts;\n    prompts.push({\n      text: \"\",\n      startingLine: \"\"\n    });\n    this.setState({\n      prompts: prompts\n    });\n  }\n\n  handlePromptChange(i, prompt) {\n    var prompts = this.state.prompts;\n    prompts[i] = prompt;\n    this.setState(prompts);\n  }\n\n  createUser() {\n    APICalls.createNewUser({}, userData => this.handleUserData(userData));\n  }\n\n  handleUserData(userData) {\n    alert(\"Project egegegegergererpublished!\");\n    var topic = this.state.topic;\n\n    if (topic != null) {\n      topic.createdBy = userData;\n      var showDialog = !userData.ageRange;\n      this.setState({\n        topic: topic,\n        showAuth: false,\n        showDialog: showDialog\n      });\n\n      if (!showDialog) {\n        console.log(\"dfdfdfdfd\");\n        this.handlePublish();\n      }\n    }\n  }\n\n}\n\nexport default SetupPromptsView;","map":{"version":3,"sources":["/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/src/components/views/createTopic/SetupPromptsView.js"],"names":["React","Component","styled","ThemeConsumer","LoadingWidget","devices","Header","theme","Prompt","TextArea","Category","Footer","NewFeature","NewPrompt","Text","MainHeader","userInfoForm","UserInfoForm","AuthForm","Button","Amplify","Auth","Wrapper","div","ContentWrapper","mobile","FeatureContainer","AddNewPrompt","props","isSmall","isDisabled","darkGray","black","lightGray","ButtonContainer","categories","APICalls","require","SetupPromptsView","constructor","state","topic","prompts","text","startingLine","showDialog","showAuth","componentDidMount","currentAuthenticatedUser","then","user","console","log","window","scrollTo","readTopic","match","params","id","data","setState","render","mainHelp","name","createdBy","handlePublish","userData","handleUserData","history","push","map","item","key","i","prompt","handlePromptChange","addNewPrompt","length","createUser","value","index","createNewPrompt","_id","isPublished","updateTopic","alert","location","reload","createNewUser","ageRange"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled, { ThemeConsumer } from \"styled-components\";\nimport LoadingWidget from \"../../LoadingWidget\";\nimport { devices } from \"../../../devices.js\";\nimport Header from \"../../commons/header/Header\";\nimport { theme } from \"../../../config/colorTheme\";\nimport Prompt from \"../../commons/Prompt\";\nimport TextArea from \"../../commons/TextArea\";\nimport Category from \"./Category\";\nimport Footer from \"../../commons/Footer\";\nimport NewFeature from \"../../feature/NewFeature\";\nimport NewPrompt from \"./NewPrompt\";\nimport Text from \"../../commons/Text\";\nimport MainHeader from \"../../commons/mainheader/MainHeader\";\nimport userInfoForm from \"../../userinfo/UserInfoForm\";\nimport UserInfoForm from \"../../userinfo/UserInfoForm\";\nimport AuthForm from \"../../commons/auth/AuthForm\";\nimport Button from \"../../commons/Button\";\n\nimport Amplify, { Auth } from \"aws-amplify\";\n\nconst Wrapper = styled.div`\n  width: 100%;\n  position: relative;\n`;\n\nconst ContentWrapper = styled.div`\n  margin: 5vw auto;\n  position: relative;\n  width: 90vw;\n\n  @media ${devices.mobile} {\n    flex-direction: column;\n    height: auto;\n  }\n`;\n\nconst FeatureContainer = styled.div`\n  margin: auto;\n  display: flex;\n  width: 70%;\n  justify-content: space-between;\n  margin-top: 3vw;\n`;\n\nconst AddNewPrompt = styled.div`\n  width: 70%;\n  margin: 3vw 0;\n  font-size: ${(props) => (props.isSmall ? \"1.2vw\" : \"2vw\")};\n  font-family: \"Roboto\", serif;\n  font-weight: ${(props) => (props.isSmall ? \"300\" : \"700\")};\n  color: ${(props) => (props.isDisabled ? theme.darkGray : theme.black)};\n  width: 100%;\n  text-align: left;\n  background-color: ${theme.lightGray};\n  padding: 3vw 2vw;\n  transition: transform 0.2s;\n  cursor: pointer;\n\n  &:hover {\n    transform: scale(1.02);\n  }\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  margin-bottom: 10vw;\n  width: 50vw;\n  margin: auto;\n  justify-content: space-between;\n`;\n\nconst categories = [\"product\", \"space\", \"service\"];\n\nvar APICalls = require(\"../../../utils/APICalls\");\n\nclass SetupPromptsView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      topic: null,\n      prompts: [\n        {\n          text: \"\",\n          startingLine: \"\",\n          showDialog: false,\n          showAuth: false,\n        },\n      ],\n    };\n  }\n\n  componentDidMount() {\n    Auth.currentAuthenticatedUser().then((user) => console.log(user));\n\n    window.scrollTo(0, 0);\n    APICalls.readTopic(this.props.match.params.id, (data) =>\n      this.setState({ topic: data })\n    );\n  }\n\n  render() {\n    if (this.state.topic == null) return <LoadingWidget></LoadingWidget>;\n    const mainHelp = (\n      <Text\n        text={\n          \"Encourage participants to tell you a story on how they see this dream \" +\n          this.state.topic.name +\n          \" being used. What do you want them to tell you about their creations? Is it to be used by a specific person or group of people and in what context? What does \" +\n          this.state.topic.name +\n          \"enable them to do?\"\n        }\n      ></Text>\n    );\n\n    return (\n      <Wrapper>\n        {this.state.showDialog && (\n          <UserInfoForm\n            user={this.state.topic.createdBy}\n            onClose={() => {\n              this.handlePublish();\n              this.setState({ showDialog: false });\n            }}\n          ></UserInfoForm>\n        )}\n\n        {this.state.showAuth && (\n          <AuthForm\n            onUserAvailable={(userData) => this.handleUserData(userData)}\n          ></AuthForm>\n        )}\n        <MainHeader\n          isSmall={true}\n          onClick={() => this.props.history.push(\"../../\")}\n        ></MainHeader>\n\n        <Header\n          text={\n            \"Create prompts for people to tell you about their dream \" +\n            this.state.topic.name\n          }\n          helpBody={mainHelp}\n        ></Header>\n        <ContentWrapper>\n          {this.state.prompts.map((item, key) => (\n            <NewPrompt\n              index={key}\n              topicName={this.state.topic.name}\n              promptText={item.text}\n              startingLine={item.startingLine}\n              onPromptChange={(i, prompt) => this.handlePromptChange(i, prompt)}\n            ></NewPrompt>\n          ))}\n          <AddNewPrompt onClick={() => this.addNewPrompt()}>\n            {\" \"}\n            + Add another prompt\n          </AddNewPrompt>\n        </ContentWrapper>\n        {this.state.prompts[0].text.length > 5 && (\n          <ButtonContainer>\n            <Button\n              text={\"Publish as a guest\"}\n              onClick={() => this.createUser()}\n            ></Button>\n            <Button\n              text={\"Sign-in and Publish\"}\n              onClick={() => this.setState({ showAuth: true })}\n            ></Button>\n          </ButtonContainer>\n        )}\n      </Wrapper>\n    );\n  }\n\n  handlePublish() {\n    this.state.prompts.map((value, index) => {\n      APICalls.createNewPrompt(\n        {\n          topic: this.state.topic._id,\n          text: value.text,\n          startingLine: value.startingLine,\n        },\n        (data) => console.log(data)\n      );\n    });\n\n    var topic = this.state.topic;\n    topic.isPublished = true;\n    APICalls.updateTopic(topic._id, topic, (data) => {\n      alert(\"Project published!\");\n      window.scrollTo(0, 0);\n      this.props.history.push(\"/topic/\" + this.state.topic._id);\n      window.location.reload();\n    });\n  }\n\n  addNewPrompt() {\n    var prompts = this.state.prompts;\n    prompts.push({ text: \"\", startingLine: \"\" });\n    this.setState({ prompts: prompts });\n  }\n\n  handlePromptChange(i, prompt) {\n    var prompts = this.state.prompts;\n    prompts[i] = prompt;\n    this.setState(prompts);\n  }\n\n  createUser() {\n    APICalls.createNewUser({}, (userData) => this.handleUserData(userData));\n  }\n\n  handleUserData(userData) {\n    alert(\"Project egegegegergererpublished!\");\n    var topic = this.state.topic;\n    if (topic != null) {\n      topic.createdBy = userData;\n      var showDialog = !userData.ageRange;\n      this.setState({ topic: topic, showAuth: false, showDialog: showDialog });\n      if (!showDialog) {\n        console.log(\"dfdfdfdfd\");\n        this.handlePublish();\n      }\n    }\n  }\n}\n\nexport default SetupPromptsView;\n"]},"metadata":{},"sourceType":"module"}