{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/src/components/views/activity/AddFeaturesView.js\";\n\nfunction _templateObject12() {\n  const data = _taggedTemplateLiteral([\"\\n  width:20vw;\\n  margin-top:4vw;\\n  \\n  float:right;\\n\"]);\n\n  _templateObject12 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  const data = _taggedTemplateLiteral([\"\\n  width:1.5vh;\\n  height:1.5vh;\\n  background-color:\", \";\\n  border-radius:5vw;\\n\\n  @media \", \" {\\n    width:2vw;\\n    height:2vw;\\n    margin: 4vw auto;\\n  }\\n\"]);\n\n  _templateObject11 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 10vw;\\n  height: 1.8vh;\\n  margin: auto;\\n  display:flex;\\n  justify-content:space-around;\\n\\n  @media \", \" {\\n    width: 20vw;\\n    height: 3vw;\\n  }\\n\"]);\n\n  _templateObject10 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  const data = _taggedTemplateLiteral([\"\\n  display:flex\\n  justify-content:space-around;  \\n  @media \", \" {\\n    margin:auto;\\n    width:90vw;\\n  }\\n\"]);\n\n  _templateObject9 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  const data = _taggedTemplateLiteral([\"\\nwidth:2vw;\\nheight:2vw;\\ncursor: pointer;\\ntransition: transform .3s;\\noutline:none;\\nmargin:auto 0.2vw;\\n&:hover{\\n  transform:scale(1.1);\\n}\\n\\n@media \", \" {\\n  width:8vw;\\n  height:8vw;\\n  max-height:8vw;\\n  font-size: 5vw\\n}\\n\\n\"]);\n\n  _templateObject8 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  const data = _taggedTemplateLiteral([\"\\nfont-size: 1.2vw\\nfont-family: 'Roboto';\\nfont-weight:700;\\ntext-transform:uppercase;\\ncolor: \", \";\\ntext-align:left;\\n\\n@media \", \" {\\n  padding-top:4vw;\\n  font-size: 5vw;\\n}\\n\\n\"]);\n\n  _templateObject7 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  const data = _taggedTemplateLiteral([\"\\n  width:70vw;\\n  /* background-color:\", \"; */\\n  display:flex;\\n  flex-direction:column;\\n  align-items:center;\\n  justify-content: flex-start;\\n\"]);\n\n  _templateObject6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteral([\"\\n  width:30vw;\\n  /* background-color:\", \" */\\n  display:flex;\\n  flex-direction:column;\\n  align-items:center;\\n  justify-content: flex-start;\\n\\n\"]);\n\n  _templateObject5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteral([\"\\nheight:38vh;\\n  display:flex;\\n\"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n  position:relative;\\n  margin:auto;\\n  height:60vh;\\n  overflow:visible;\\n  \\n\"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n  margin:auto;\\n  position:relative;\\n  width:90vw;\\n  padding-bottom:10vw;\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  width:100%;\\n  position:relative;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Feature, { FeatureType as FeatureTypes } from \"../../feature/Feature\";\nimport NewFeature from \"../../feature/NewFeature\";\nimport Drone from \"../../drone/Drone\";\nimport LoadingWidget from \"../../LoadingWidget\";\nimport { isGibberish } from \"../../../utils.js\";\nimport { devices } from \"../../../devices.js\";\nimport Header from \"../../commons/header/Header\";\nimport Button from \"../../commons/Button\";\nimport { confirmAlert } from 'react-confirm-alert'; // Import\n\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\nimport { theme } from \"../../../config/colorTheme\";\nimport Hero from \"../../commons/Hero\";\nconst Wrapper = styled.div(_templateObject());\nconst ContentWrapper = styled.div(_templateObject2());\nconst DroneContainer = styled.div(_templateObject3());\nconst FeatureContainer = styled.div(_templateObject4());\nconst CreateFeatureContainer = styled.div(_templateObject5(), theme.secondaryColor20);\nconst FeatureSetContainer = styled.div(_templateObject6(), theme.primaryColor20);\nconst RowHeader = styled.h3(_templateObject7(), theme.black, devices.mobile);\nconst PaginationButton = styled.img(_templateObject8(), devices.mobile);\nconst FeatureSet = styled.div(_templateObject9(), devices.mobile);\nconst DotWrapper = styled.div(_templateObject10(), devices.mobile);\nconst Dot = styled.div(_templateObject11(), props => props.selected ? theme.secondaryColor : theme.lightGray, devices.mobile);\nconst ButtonWrapper = styled.div(_templateObject12());\n\nvar APICalls = require(\"../../../utils/APICalls\");\n\nconst VISIBLE_FEATURES_COUNT = 3;\nconst FEATURE_SET_SIZE = 12;\nvar featurePool = [{\n  title: \"Night Vision\",\n  description: \"Ability to  record videos in dark\"\n}, {\n  title: \"Thermal Cam\",\n  description: \"A camera that can capture surface temperatures of objects below\"\n}, {\n  title: \"Time Travel Cam\",\n  description: \"A camera that capture videos of past, present and future incidents\"\n}, {\n  title: \"X-Ray\",\n  description: \"Ability to see through physical objects\"\n}, {\n  title: \"Night Visio 2\",\n  description: \"Ability to  record videos in dark\"\n}, {\n  title: \"Thermal Cam 2\",\n  description: \"A camera that can capture surface temperatures of objects below\"\n}, {\n  title: \"Time Travel Cam 2\",\n  description: \"A camera that capture videos of past, present and future incidents\"\n}, {\n  title: \"X-Ray 2\",\n  description: \"Ability to see through physical objects\"\n}, {\n  title: \"Night Visio 3\",\n  description: \"Ability to  record videos in dark\"\n}, {\n  title: \"Thermal Cam 4\",\n  description: \"A camera that can capture surface temperatures of objects below\"\n}, {\n  title: \"Time Travel Cam 5\",\n  description: \"A camera that capture videos of past, present and future incidents\"\n}, {\n  title: \"X-Ray 6\",\n  description: \"Ability to see through physical objects\"\n}, {\n  title: \"Night Visio 8\",\n  description: \"Ability to  record videos in dark\"\n}, {\n  title: \"Thermal Cam 8\",\n  description: \"A camera that can capture surface temperatures of objects below\"\n}, {\n  title: \"Time Travel Cam 8\",\n  description: \"A camera that capture videos of past, present and future incidents\"\n}, {\n  title: \"X-Ray 8\",\n  description: \"Ability to see through physical objects\"\n}];\n\nclass AddFeaturesView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFeaureClick = feature => {\n      let drone = this.state.response;\n\n      if (feature.featureType == FeatureTypes.selectable) {\n        if (drone.features.length >= 4) {\n          this.displayMaxFeaturesAlert();\n          return;\n        }\n\n        let featureSet = this.state.featureSet;\n        drone.features.push(featureSet[feature.index]);\n\n        if (featurePool.length) {\n          featureSet[feature.index] = featurePool.pop();\n          this.setState({\n            featureSet: featureSet\n          });\n        } else {//TODO: refresh pool\n        }\n      } else {\n        drone.features.splice(feature.index, 1); //remove button action\n      }\n\n      this.setState({\n        drone: drone\n      });\n      this.updateDrone();\n    };\n\n    this.handleAddNewFeatureClick = feature => {\n      let drone = this.state.response;\n\n      if (drone.features.length >= 4) {\n        this.displayMaxFeaturesAlert();\n        return;\n      }\n\n      drone.features.push(feature);\n      this.setState({\n        response: drone\n      });\n      this.updateDrone();\n    };\n\n    this.state = {\n      visiblefeatureIndex: 0,\n      visibleFetures: [],\n      featureSet: [],\n      selectedFetures: [],\n      response: null\n    };\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0); //fetch features, populate the feature pool, populate featureset\n    // fetch(\"/features/\")\n    //   .then(response => response.json())\n    //   .then(data => {\n    //     featurePool = data;\n    //     this.setFeatureSet(FEATURE_SET_SIZE);\n    //   });\n    //fetch the drone data using id\n\n    APICalls.readResponse(this.props.match.params.id, data => {\n      APICalls.readFeaturesOfTopic(data.topic._id, data => {\n        featurePool = data;\n        this.setFeatureSet(FEATURE_SET_SIZE);\n      });\n      this.setState({\n        response: data\n      });\n    });\n  }\n\n  updateDrone() {\n    fetch('/responses/' + this.state.response._id, {\n      method: 'PUT',\n      body: JSON.stringify(this.state.response),\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n        'Mode': \"CORS\"\n      }\n    }).then(data => {\n      console.log(data);\n    });\n  }\n\n  render() {\n    if (this.state.response == null && this.state.featureSet) return React.createElement(LoadingWidget, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    });\n    return React.createElement(Wrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(Hero, {\n      isSmall: true,\n      onClick: () => this.props.history.push(\"../../\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), React.createElement(Header, {\n      text: \"Add dream features to \" + this.state.response.topic.name.toLowerCase(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(ContentWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(DroneContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(Drone, {\n      featureClickHandler: this.handleFeaureClick.bind(this),\n      editable: true,\n      drone: this.state.response,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    })), React.createElement(FeatureContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(CreateFeatureContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(RowHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"+ Create new\"), React.createElement(NewFeature, {\n      topicId: this.state.response.topic._id,\n      clickHandler: this.handleAddNewFeatureClick.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    })), React.createElement(FeatureSetContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(RowHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"or, select from what others have created\"), React.createElement(FeatureSet, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(PaginationButton, {\n      src: require(\"./assets/left_arrow_icon.svg\"),\n      onClick: () => this.handlePreviousClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }), this.state.featureSet.slice(this.state.visiblefeatureIndex, this.state.visiblefeatureIndex + VISIBLE_FEATURES_COUNT).map((item, key) => React.createElement(Feature, {\n      name: item.name,\n      description: item.description,\n      featureType: FeatureTypes.selectable,\n      clickHandler: this.handleFeaureClick.bind(this),\n      index: this.state.visiblefeatureIndex + key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }), this), React.createElement(PaginationButton, {\n      src: require(\"./assets/right_arrow_icon.svg\"),\n      onClick: () => this.handleNextClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    })), React.createElement(DotWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, this.renderScrollDots()))), React.createElement(ButtonWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => this.handleNextButtonClick(),\n      text: \"Next\",\n      isDisabled: this.state.response.features.length <= 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }))));\n  }\n\n  handleNextButtonClick() {\n    const message = \"It looks like your submission includes some gibberish. Please make sure your answers are readable. If you believe this is a mistake on our part click skip without making any changes.\";\n    let containsGib = false;\n    let feature;\n\n    for (let i = 0; i < this.state.response.features.length; i++) {\n      feature = this.state.response.features[i];\n\n      if (isGibberish(feature.name, 2) || isGibberish(feature.description, 3)) {\n        containsGib = true;\n        break;\n      }\n    }\n\n    if (containsGib) {\n      confirmAlert({\n        title: \"We detected some gibberish!\",\n        message: message,\n        buttons: [{\n          label: \"Skip\",\n          onClick: () => this.props.history.push(\"../../prompt/\" + this.state.response._id)\n        }, {\n          label: \"Continue\",\n          onClick: () => {}\n        }]\n      });\n    } else {\n      this.props.history.push(\"../../prompt/\" + this.state.response._id);\n    }\n  }\n\n  renderButton() {\n    if (this.state.drone.features.length > 0) {\n      return React.createElement(Button, {\n        onClick: () => {\n          this.props.history.push('../story/' + this.state.drone._id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \"Next\");\n    }\n\n    return null;\n  }\n\n  renderScrollDots() {\n    let dots = [];\n    let selected = false;\n    let index = this.state.visiblefeatureIndex;\n    const size = Math.min(this.state.featureSet.length, FEATURE_SET_SIZE);\n\n    for (let i = 0; i < size / VISIBLE_FEATURES_COUNT; i++) {\n      selected = i == index / VISIBLE_FEATURES_COUNT;\n      dots.push(React.createElement(Dot, {\n        selected: selected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }));\n    }\n\n    return dots;\n  }\n\n  displayMaxFeaturesAlert() {\n    alert(\"Your dream \" + this.state.response.topic.name + \" can have a maximum of 4 superpowers.\");\n  }\n\n  handleNextClick() {\n    let index = this.state.visiblefeatureIndex;\n\n    if (index != null && index + VISIBLE_FEATURES_COUNT < this.state.featureSet.length) {\n      this.setState({\n        visiblefeatureIndex: index + VISIBLE_FEATURES_COUNT\n      });\n    }\n  }\n\n  handlePreviousClick() {\n    let index = this.state.visiblefeatureIndex;\n\n    if (index != null && index - VISIBLE_FEATURES_COUNT >= 0) {\n      this.setState({\n        visiblefeatureIndex: index - VISIBLE_FEATURES_COUNT\n      });\n    }\n  }\n\n  setFeatureSet(length) {\n    var featureSet = [];\n\n    for (var item of featurePool) {\n      // if(!isGibberish(item.title,4) && !isGibberish(item.description,8)){\n      featureSet.push(item);\n\n      if (featureSet.length >= length) {\n        break;\n      } // }\n\n    }\n\n    ; //featureSet = featurePool.splice(0, length)\n\n    this.setState({\n      featureSet: featureSet\n    });\n  }\n\n}\n\nexport default AddFeaturesView;","map":{"version":3,"sources":["/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/src/components/views/activity/AddFeaturesView.js"],"names":["React","Component","styled","Feature","FeatureType","FeatureTypes","NewFeature","Drone","LoadingWidget","isGibberish","devices","Header","Button","confirmAlert","theme","Hero","Wrapper","div","ContentWrapper","DroneContainer","FeatureContainer","CreateFeatureContainer","secondaryColor20","FeatureSetContainer","primaryColor20","RowHeader","h3","black","mobile","PaginationButton","img","FeatureSet","DotWrapper","Dot","props","selected","secondaryColor","lightGray","ButtonWrapper","APICalls","require","VISIBLE_FEATURES_COUNT","FEATURE_SET_SIZE","featurePool","title","description","AddFeaturesView","constructor","handleFeaureClick","feature","drone","state","response","featureType","selectable","features","length","displayMaxFeaturesAlert","featureSet","push","index","pop","setState","splice","updateDrone","handleAddNewFeatureClick","visiblefeatureIndex","visibleFetures","selectedFetures","componentDidMount","window","scrollTo","readResponse","match","params","id","data","readFeaturesOfTopic","topic","_id","setFeatureSet","fetch","method","body","JSON","stringify","headers","then","console","log","render","history","name","toLowerCase","bind","handlePreviousClick","slice","map","item","key","handleNextClick","renderScrollDots","handleNextButtonClick","message","containsGib","i","buttons","label","onClick","renderButton","dots","size","Math","min","alert"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Feature, { FeatureType as FeatureTypes } from \"../../feature/Feature\";\nimport NewFeature from \"../../feature/NewFeature\";\nimport Drone from \"../../drone/Drone\"\nimport LoadingWidget from \"../../LoadingWidget\";\nimport {isGibberish} from \"../../../utils.js\"\nimport {devices} from \"../../../devices.js\"\nimport Header from \"../../commons/header/Header\"\nimport Button from \"../../commons/Button\"\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\n\n import {theme} from \"../../../config/colorTheme\";\nimport Hero from \"../../commons/Hero\";\n\nconst Wrapper = styled.div`\n  width:100%;\n  position:relative;\n`;\n\nconst ContentWrapper = styled.div`\n  margin:auto;\n  position:relative;\n  width:90vw;\n  padding-bottom:10vw;\n`;\n\nconst DroneContainer = styled.div`\n  position:relative;\n  margin:auto;\n  height:60vh;\n  overflow:visible;\n  \n`;\n\nconst FeatureContainer = styled.div`\nheight:38vh;\n  display:flex;\n`;\n\nconst CreateFeatureContainer = styled.div`\n  width:30vw;\n  /* background-color:${theme.secondaryColor20} */\n  display:flex;\n  flex-direction:column;\n  align-items:center;\n  justify-content: flex-start;\n\n`;\n\nconst FeatureSetContainer = styled.div`\n  width:70vw;\n  /* background-color:${theme.primaryColor20}; */\n  display:flex;\n  flex-direction:column;\n  align-items:center;\n  justify-content: flex-start;\n`;\n\nconst RowHeader = styled.h3`\nfont-size: 1.2vw\nfont-family: 'Roboto';\nfont-weight:700;\ntext-transform:uppercase;\ncolor: ${theme.black};\ntext-align:left;\n\n@media ${devices.mobile} {\n  padding-top:4vw;\n  font-size: 5vw;\n}\n\n`;\n\nconst PaginationButton = styled.img`\nwidth:2vw;\nheight:2vw;\ncursor: pointer;\ntransition: transform .3s;\noutline:none;\nmargin:auto 0.2vw;\n&:hover{\n  transform:scale(1.1);\n}\n\n@media ${devices.mobile} {\n  width:8vw;\n  height:8vw;\n  max-height:8vw;\n  font-size: 5vw\n}\n\n`;\n\nconst FeatureSet = styled.div`\n  display:flex\n  justify-content:space-around;  \n  @media ${devices.mobile} {\n    margin:auto;\n    width:90vw;\n  }\n`;\n\nconst DotWrapper = styled.div`\n  width: 10vw;\n  height: 1.8vh;\n  margin: auto;\n  display:flex;\n  justify-content:space-around;\n\n  @media ${devices.mobile} {\n    width: 20vw;\n    height: 3vw;\n  }\n`;\n\nconst Dot = styled.div`\n  width:1.5vh;\n  height:1.5vh;\n  background-color:${props => props.selected ? theme.secondaryColor : theme.lightGray};\n  border-radius:5vw;\n\n  @media ${devices.mobile} {\n    width:2vw;\n    height:2vw;\n    margin: 4vw auto;\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  width:20vw;\n  margin-top:4vw;\n  \n  float:right;\n`;\n\n\nvar APICalls = require(\"../../../utils/APICalls\")\n\nconst VISIBLE_FEATURES_COUNT = 3;\nconst  FEATURE_SET_SIZE = 12;\n\n\n\n\nvar featurePool = [\n  { title: \"Night Vision\", description: \"Ability to  record videos in dark\" },\n  { title: \"Thermal Cam\", description: \"A camera that can capture surface temperatures of objects below\" },\n  { title: \"Time Travel Cam\", description: \"A camera that capture videos of past, present and future incidents\" },\n  { title: \"X-Ray\", description: \"Ability to see through physical objects\" },\n  { title: \"Night Visio 2\", description: \"Ability to  record videos in dark\" },\n  { title: \"Thermal Cam 2\", description: \"A camera that can capture surface temperatures of objects below\" },\n  { title: \"Time Travel Cam 2\", description: \"A camera that capture videos of past, present and future incidents\" },\n  { title: \"X-Ray 2\", description: \"Ability to see through physical objects\" },\n  { title: \"Night Visio 3\", description: \"Ability to  record videos in dark\" },\n  { title: \"Thermal Cam 4\", description: \"A camera that can capture surface temperatures of objects below\" },\n  { title: \"Time Travel Cam 5\", description: \"A camera that capture videos of past, present and future incidents\" },\n  { title: \"X-Ray 6\", description: \"Ability to see through physical objects\" },\n  { title: \"Night Visio 8\", description: \"Ability to  record videos in dark\" },\n  { title: \"Thermal Cam 8\", description: \"A camera that can capture surface temperatures of objects below\" },\n  { title: \"Time Travel Cam 8\", description: \"A camera that capture videos of past, present and future incidents\" },\n  { title: \"X-Ray 8\", description: \"Ability to see through physical objects\" }\n\n];\n\nclass AddFeaturesView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visiblefeatureIndex: 0,\n      visibleFetures: [],\n      featureSet: [],\n      selectedFetures: [],\n      response: null\n    };\n\n    \n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    //fetch features, populate the feature pool, populate featureset\n    // fetch(\"/features/\")\n    //   .then(response => response.json())\n    //   .then(data => {\n    //     featurePool = data;\n    //     this.setFeatureSet(FEATURE_SET_SIZE);\n    //   });\n\n    //fetch the drone data using id\n    APICalls.readResponse(this.props.match.params.id, (data) => {\n      APICalls.readFeaturesOfTopic(data.topic._id,\n        (data) => { featurePool = data;\n                    this.setFeatureSet(FEATURE_SET_SIZE);})\n      this.setState({ response: data });\n\n    })\n  }\n\n  updateDrone() {\n    fetch('/responses/' + this.state.response._id,\n      {\n        method: 'PUT',\n        body: JSON.stringify(this.state.response),\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json',\n          'Mode': \"CORS\"\n        }\n      }).then(data => { console.log(data) }\n      );\n  }\n\n  render() {\n    if ((this.state.response == null) && this.state.featureSet) return <LoadingWidget></LoadingWidget>;\n    return (\n      <Wrapper>\n        <Hero isSmall={true} onClick={()=>this.props.history.push(\"../../\")}></Hero>\n        <Header\n          text={\n            \"Add dream features to \" +\n            this.state.response.topic.name.toLowerCase()\n          }\n        ></Header>\n        <ContentWrapper>\n          <DroneContainer>\n            <Drone\n              featureClickHandler={this.handleFeaureClick.bind(this)}\n              editable={true}\n              drone={this.state.response}\n            ></Drone>\n          </DroneContainer>\n          <FeatureContainer>\n            <CreateFeatureContainer>\n              <RowHeader>+ Create new</RowHeader>\n              <NewFeature\n                topicId={this.state.response.topic._id}\n                clickHandler={this.handleAddNewFeatureClick.bind(this)}\n              />\n            </CreateFeatureContainer>\n            <FeatureSetContainer>\n              <RowHeader>or, select from what others have created</RowHeader>\n              <FeatureSet>\n                <PaginationButton\n                  src={require(\"./assets/left_arrow_icon.svg\")}\n                  onClick={() => this.handlePreviousClick()}\n                ></PaginationButton>\n                {this.state.featureSet\n                  .slice(\n                    this.state.visiblefeatureIndex,\n                    this.state.visiblefeatureIndex + VISIBLE_FEATURES_COUNT\n                  )\n                  .map(\n                    (item, key) => (\n                      <Feature\n                        name={item.name}\n                        description={item.description}\n                        featureType={FeatureTypes.selectable}\n                        clickHandler={this.handleFeaureClick.bind(this)}\n                        index={this.state.visiblefeatureIndex + key}\n                      ></Feature>\n                    ),\n                    this\n                  )}\n                <PaginationButton\n                  src={require(\"./assets/right_arrow_icon.svg\")}\n                  onClick={() => this.handleNextClick()}\n                ></PaginationButton>\n              </FeatureSet>\n              <DotWrapper>{this.renderScrollDots()}</DotWrapper>\n            </FeatureSetContainer>\n          </FeatureContainer>\n          <ButtonWrapper>\n            <Button\n              onClick={() => this.handleNextButtonClick()}\n              text={\"Next\"}\n              isDisabled={this.state.response.features.length <= 0}\n            ></Button>\n          </ButtonWrapper>\n        </ContentWrapper>\n      </Wrapper>\n    );\n  }\n\n  handleNextButtonClick() { \n  const message =\n    \"It looks like your submission includes some gibberish. Please make sure your answers are readable. If you believe this is a mistake on our part click skip without making any changes.\";\n\n    let containsGib = false;\n    let feature;\n    for (let i = 0; i < this.state.response.features.length; i++) {\n      feature = this.state.response.features[i];\n      if (isGibberish(feature.name, 2) || isGibberish(feature.description, 3)) {\n        containsGib = true;\n        break;\n      }\n    }\n    if (containsGib) {\n      confirmAlert({\n        title: \"We detected some gibberish!\",\n        message: message,\n        buttons: [\n          {\n            label: \"Skip\",\n            onClick: () =>\n              this.props.history.push(\n                \"../../prompt/\" + this.state.response._id\n              ),\n          },\n          {\n            label: \"Continue\",\n            onClick: () => {},\n          },\n        ],\n      });\n    } else {\n      this.props.history.push(\"../../prompt/\" + this.state.response._id);\n    }\n  }\n\n  renderButton() {\n    if (this.state.drone.features.length > 0) {\n      return <Button onClick={() => {this.props.history.push('../story/' + this.state.drone._id)}}>Next</Button>\n    }\n    return null;\n  }\n\n  renderScrollDots() {\n    let dots = []\n    let selected = false;\n    let index = this.state.visiblefeatureIndex;\n    \n    const size =Math.min(this.state.featureSet.length, FEATURE_SET_SIZE)\n\n    for (let i = 0; i < size / VISIBLE_FEATURES_COUNT; i++) {\n      selected = i == index/VISIBLE_FEATURES_COUNT;\n      dots.push(<Dot selected={selected}></Dot>)\n    }\n    return dots;\n  }\n\n  handleFeaureClick = (feature) => {\n    let drone = this.state.response;\n    if (feature.featureType == FeatureTypes.selectable) {\n      if (drone.features.length >= 4){\n        this.displayMaxFeaturesAlert();\n        return\n      }\n      let featureSet = this.state.featureSet;\n      drone.features.push(featureSet[feature.index]);\n      if (featurePool.length) {\n        featureSet[feature.index] = featurePool.pop();\n        this.setState({ featureSet: featureSet });\n      } else {\n        //TODO: refresh pool\n      }\n\n    } else {\n      drone.features.splice(feature.index, 1); //remove button action\n\n    }\n    this.setState({ drone: drone });\n    this.updateDrone();\n  }\n\n  handleAddNewFeatureClick = (feature) => {\n    let drone = this.state.response;\n    if (drone.features.length >= 4){\n      this.displayMaxFeaturesAlert();\n      return\n    }\n    drone.features.push(feature);\n    this.setState({ response: drone });\n    this.updateDrone();\n  }\n\n  displayMaxFeaturesAlert(){\n    alert(\"Your dream \" + this.state.response.topic.name+ \" can have a maximum of 4 superpowers.\");\n  }\n\n  handleNextClick() {\n    let index = this.state.visiblefeatureIndex;\n    if (index != null && (index + VISIBLE_FEATURES_COUNT) < this.state.featureSet.length) {\n      this.setState({ visiblefeatureIndex: (index + VISIBLE_FEATURES_COUNT) })\n    }\n  }\n\n  handlePreviousClick() {\n    let index = this.state.visiblefeatureIndex;\n    if (index != null && (index - VISIBLE_FEATURES_COUNT) >= 0) {\n      this.setState({ visiblefeatureIndex: (index - VISIBLE_FEATURES_COUNT) })\n    }\n  }\n\n  setFeatureSet(length) {\n    var featureSet = [];\n    for(var item of featurePool){\n      // if(!isGibberish(item.title,4) && !isGibberish(item.description,8)){\n        featureSet.push(item);\n        if(featureSet.length>= length) {\n          break;\n        }\n      // }\n    };\n    //featureSet = featurePool.splice(0, length)\n    this.setState({ featureSet: featureSet });\n  }\n\n\n\n\n\n\n}\n\nexport default AddFeaturesView;\n"]},"metadata":{},"sourceType":"module"}