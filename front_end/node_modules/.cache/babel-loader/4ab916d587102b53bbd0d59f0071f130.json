{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/src/components/views/activity/AddFeaturesView.js\";\n\nfunction _templateObject12() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 20vw;\\n  margin-top: 4vw;\\n\\n  float: right;\\n\"]);\n\n  _templateObject12 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 1.5vh;\\n  height: 1.5vh;\\n  background-color: \", \";\\n  border-radius: 5vw;\\n\\n  @media \", \" {\\n    width: 2vw;\\n    height: 2vw;\\n    margin: 4vw auto;\\n  }\\n\"]);\n\n  _templateObject11 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 10vw;\\n  height: 1.8vh;\\n  margin: auto;\\n  display: flex;\\n  justify-content: space-around;\\n\\n  @media \", \" {\\n    width: 20vw;\\n    height: 3vw;\\n  }\\n\"]);\n\n  _templateObject10 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  const data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-around;\\n  @media \", \" {\\n    margin: auto;\\n    width: 90vw;\\n  }\\n\"]);\n\n  _templateObject9 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 2vw;\\n  height: 2vw;\\n  cursor: pointer;\\n  transition: transform 0.3s;\\n  outline: none;\\n  margin: auto 0.2vw;\\n  &:hover {\\n    transform: scale(1.1);\\n  }\\n\\n  @media \", \" {\\n    width: 8vw;\\n    height: 8vw;\\n    max-height: 8vw;\\n    font-size: 5vw;\\n  }\\n\"]);\n\n  _templateObject8 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  const data = _taggedTemplateLiteral([\"\\n  font-size: 1.2vw;\\n  font-family: \\\"Roboto\\\";\\n  font-weight: 700;\\n  text-transform: uppercase;\\n  color: \", \";\\n  text-align: left;\\n\\n  @media \", \" {\\n    padding-top: 4vw;\\n    font-size: 5vw;\\n  }\\n\"]);\n\n  _templateObject7 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 70vw;\\n  /* background-color:\", \"; */\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: flex-start;\\n\"]);\n\n  _templateObject6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 30vw;\\n  /* background-color:\", \" */\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: flex-start;\\n\"]);\n\n  _templateObject5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteral([\"\\n  height: 38vh;\\n  display: flex;\\n\"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  margin: auto;\\n  height: 60vh;\\n  overflow: visible;\\n\"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n  margin: auto;\\n  position: relative;\\n  width: 90vw;\\n  padding-bottom: 10vw;\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  position: relative;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Feature, { FeatureType as FeatureTypes } from \"../../feature/Feature\";\nimport NewFeature from \"../../feature/NewFeature\";\nimport Drone from \"../../drone/Drone\";\nimport LoadingWidget from \"../../LoadingWidget\";\nimport { isGibberish } from \"../../../GibberishFilter\";\nimport { devices } from \"../../../devices.js\";\nimport Header from \"../../commons/header/Header\";\nimport Button from \"../../commons/Button\";\nimport { confirmAlert } from \"react-confirm-alert\"; // Import\n\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\n\nimport { theme } from \"../../../config/colorTheme\";\nimport MainHeader from \"../../commons/mainheader/MainHeader\";\nconst Wrapper = styled.div(_templateObject());\nconst ContentWrapper = styled.div(_templateObject2());\nconst DroneContainer = styled.div(_templateObject3());\nconst FeatureContainer = styled.div(_templateObject4());\nconst CreateFeatureContainer = styled.div(_templateObject5(), theme.secondaryColor20);\nconst FeatureSetContainer = styled.div(_templateObject6(), theme.primaryColor20);\nconst RowHeader = styled.h3(_templateObject7(), theme.black, devices.mobile);\nconst PaginationButton = styled.img(_templateObject8(), devices.mobile);\nconst FeatureSet = styled.div(_templateObject9(), devices.mobile);\nconst DotWrapper = styled.div(_templateObject10(), devices.mobile);\nconst Dot = styled.div(_templateObject11(), props => props.selected ? theme.secondaryColor : theme.lightGray, devices.mobile);\nconst ButtonWrapper = styled.div(_templateObject12());\n\nvar APICalls = require(\"../../../utils/APICalls\");\n\nconst VISIBLE_FEATURES_COUNT = 3;\nconst FEATURE_SET_SIZE = 12;\nvar featurePool = [{\n  title: \"Night Vision\",\n  description: \"Ability to  record videos in dark\"\n}, {\n  title: \"Thermal Cam\",\n  description: \"A camera that can capture surface temperatures of objects below\"\n}, {\n  title: \"Time Travel Cam\",\n  description: \"A camera that capture videos of past, present and future incidents\"\n}, {\n  title: \"X-Ray\",\n  description: \"Ability to see through physical objects\"\n}, {\n  title: \"Night Visio 2\",\n  description: \"Ability to  record videos in dark\"\n}, {\n  title: \"Thermal Cam 2\",\n  description: \"A camera that can capture surface temperatures of objects below\"\n}, {\n  title: \"Time Travel Cam 2\",\n  description: \"A camera that capture videos of past, present and future incidents\"\n}, {\n  title: \"X-Ray 2\",\n  description: \"Ability to see through physical objects\"\n}, {\n  title: \"Night Visio 3\",\n  description: \"Ability to  record videos in dark\"\n}, {\n  title: \"Thermal Cam 4\",\n  description: \"A camera that can capture surface temperatures of objects below\"\n}, {\n  title: \"Time Travel Cam 5\",\n  description: \"A camera that capture videos of past, present and future incidents\"\n}, {\n  title: \"X-Ray 6\",\n  description: \"Ability to see through physical objects\"\n}, {\n  title: \"Night Visio 8\",\n  description: \"Ability to  record videos in dark\"\n}, {\n  title: \"Thermal Cam 8\",\n  description: \"A camera that can capture surface temperatures of objects below\"\n}, {\n  title: \"Time Travel Cam 8\",\n  description: \"A camera that capture videos of past, present and future incidents\"\n}, {\n  title: \"X-Ray 8\",\n  description: \"Ability to see through physical objects\"\n}];\n\nclass AddFeaturesView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFeaureClick = feature => {\n      let drone = this.state.response;\n\n      if (feature.featureType == FeatureTypes.selectable) {\n        if (drone.features.length >= 4) {\n          this.displayMaxFeaturesAlert();\n          return;\n        }\n\n        let featureSet = this.state.featureSet;\n        drone.features.push(featureSet[feature.index]);\n\n        if (featurePool.length) {\n          featureSet[feature.index] = featurePool.pop();\n          this.setState({\n            featureSet: featureSet\n          });\n        } else {//TODO: refresh pool\n        }\n      } else {\n        drone.features.splice(feature.index, 1); //remove button action\n      }\n\n      this.setState({\n        drone: drone\n      });\n      this.updateDrone();\n    };\n\n    this.handleAddNewFeatureClick = feature => {\n      let drone = this.state.response;\n\n      if (drone.features.length >= 4) {\n        this.displayMaxFeaturesAlert();\n        return;\n      }\n\n      drone.features.push(feature);\n      this.setState({\n        response: drone\n      });\n      this.updateDrone();\n    };\n\n    this.state = {\n      visiblefeatureIndex: 0,\n      visibleFetures: [],\n      featureSet: [],\n      selectedFetures: [],\n      response: null\n    };\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0); //fetch features, populate the feature pool, populate featureset\n    // fetch(\"/features/\")\n    //   .then(response => response.json())\n    //   .then(data => {\n    //     featurePool = data;\n    //     this.setFeatureSet(FEATURE_SET_SIZE);\n    //   });\n    //fetch the drone data using id\n\n    APICalls.readResponse(this.props.match.params.id, data => {\n      APICalls.readFeaturesOfTopic(data.topic._id, data => {\n        featurePool = data;\n        this.setFeatureSet(FEATURE_SET_SIZE);\n      });\n      this.setState({\n        response: data\n      });\n    });\n  }\n\n  updateDrone() {\n    fetch(\"/responses/\" + this.state.response._id, {\n      method: \"PUT\",\n      body: JSON.stringify(this.state.response),\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Mode: \"CORS\"\n      }\n    }).then(data => {\n      console.log(data);\n    });\n  }\n\n  render() {\n    if (this.state.response == null && this.state.featureSet) return React.createElement(LoadingWidget, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    });\n    return React.createElement(Wrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(MainHeader, {\n      isSmall: true,\n      onClick: () => this.props.history.push(\"../../\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(Header, {\n      text: \"Add dream features to \" + this.state.response.topic.name.toLowerCase(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }), React.createElement(ContentWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(DroneContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(Drone, {\n      featureClickHandler: this.handleFeaureClick.bind(this),\n      editable: true,\n      drone: this.state.response,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    })), React.createElement(FeatureContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(CreateFeatureContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(RowHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"+ Create new\"), React.createElement(NewFeature, {\n      topicId: this.state.response.topic._id,\n      clickHandler: this.handleAddNewFeatureClick.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    })), React.createElement(FeatureSetContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(RowHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"or, select from what others have created\"), React.createElement(FeatureSet, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(PaginationButton, {\n      src: require(\"./assets/left_arrow_icon.svg\"),\n      onClick: () => this.handlePreviousClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }), this.state.featureSet.slice(this.state.visiblefeatureIndex, this.state.visiblefeatureIndex + VISIBLE_FEATURES_COUNT).map((item, key) => React.createElement(Feature, {\n      name: item.name,\n      description: item.description,\n      featureType: FeatureTypes.selectable,\n      clickHandler: this.handleFeaureClick.bind(this),\n      index: this.state.visiblefeatureIndex + key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }), this), React.createElement(PaginationButton, {\n      src: require(\"./assets/right_arrow_icon.svg\"),\n      onClick: () => this.handleNextClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    })), React.createElement(DotWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, this.renderScrollDots()))), React.createElement(ButtonWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => this.handleNextButtonClick(),\n      text: \"Next\",\n      isDisabled: this.state.response.features.length <= 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }))));\n  }\n\n  handleNextButtonClick() {\n    const message = \"It looks like your submission includes some gibberish. Please make sure your answers are readable. If you believe this is a mistake on our part click skip without making any changes.\";\n    let containsGib = false;\n    let feature;\n\n    for (let i = 0; i < this.state.response.features.length; i++) {\n      feature = this.state.response.features[i];\n\n      if (isGibberish(feature.name, 2) || isGibberish(feature.description, 3)) {\n        containsGib = true;\n        break;\n      }\n    }\n\n    if (containsGib) {\n      confirmAlert({\n        title: \"We detected some gibberish!\",\n        message: message,\n        buttons: [{\n          label: \"Skip\",\n          onClick: () => this.props.history.push(\"../../prompt/\" + this.state.response._id)\n        }, {\n          label: \"Continue\",\n          onClick: () => {}\n        }]\n      });\n    } else {\n      this.props.history.push(\"../../prompt/\" + this.state.response._id);\n    }\n  }\n\n  renderButton() {\n    if (this.state.drone.features.length > 0) {\n      return React.createElement(Button, {\n        onClick: () => {\n          this.props.history.push(\"../story/\" + this.state.drone._id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, \"Next\");\n    }\n\n    return null;\n  }\n\n  renderScrollDots() {\n    let dots = [];\n    let selected = false;\n    let index = this.state.visiblefeatureIndex;\n    const size = Math.min(this.state.featureSet.length, FEATURE_SET_SIZE);\n\n    for (let i = 0; i < size / VISIBLE_FEATURES_COUNT; i++) {\n      selected = i == index / VISIBLE_FEATURES_COUNT;\n      dots.push(React.createElement(Dot, {\n        selected: selected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }));\n    }\n\n    return dots;\n  }\n\n  displayMaxFeaturesAlert() {\n    alert(\"Your dream \" + this.state.response.topic.name + \" can have a maximum of 4 superpowers.\");\n  }\n\n  handleNextClick() {\n    let index = this.state.visiblefeatureIndex;\n\n    if (index != null && index + VISIBLE_FEATURES_COUNT < this.state.featureSet.length) {\n      this.setState({\n        visiblefeatureIndex: index + VISIBLE_FEATURES_COUNT\n      });\n    }\n  }\n\n  handlePreviousClick() {\n    let index = this.state.visiblefeatureIndex;\n\n    if (index != null && index - VISIBLE_FEATURES_COUNT >= 0) {\n      this.setState({\n        visiblefeatureIndex: index - VISIBLE_FEATURES_COUNT\n      });\n    }\n  }\n\n  setFeatureSet(length) {\n    var featureSet = [];\n\n    for (var item of featurePool) {\n      // if(!isGibberish(item.title,4) && !isGibberish(item.description,8)){\n      featureSet.push(item);\n\n      if (featureSet.length >= length) {\n        break;\n      } // }\n\n    } //featureSet = featurePool.splice(0, length)\n\n\n    this.setState({\n      featureSet: featureSet\n    });\n  }\n\n}\n\nexport default AddFeaturesView;","map":{"version":3,"sources":["/Users/piyum/Desktop/tempfolder/frontend_dreamcollective/src/components/views/activity/AddFeaturesView.js"],"names":["React","Component","styled","Feature","FeatureType","FeatureTypes","NewFeature","Drone","LoadingWidget","isGibberish","devices","Header","Button","confirmAlert","theme","MainHeader","Wrapper","div","ContentWrapper","DroneContainer","FeatureContainer","CreateFeatureContainer","secondaryColor20","FeatureSetContainer","primaryColor20","RowHeader","h3","black","mobile","PaginationButton","img","FeatureSet","DotWrapper","Dot","props","selected","secondaryColor","lightGray","ButtonWrapper","APICalls","require","VISIBLE_FEATURES_COUNT","FEATURE_SET_SIZE","featurePool","title","description","AddFeaturesView","constructor","handleFeaureClick","feature","drone","state","response","featureType","selectable","features","length","displayMaxFeaturesAlert","featureSet","push","index","pop","setState","splice","updateDrone","handleAddNewFeatureClick","visiblefeatureIndex","visibleFetures","selectedFetures","componentDidMount","window","scrollTo","readResponse","match","params","id","data","readFeaturesOfTopic","topic","_id","setFeatureSet","fetch","method","body","JSON","stringify","headers","Accept","Mode","then","console","log","render","history","name","toLowerCase","bind","handlePreviousClick","slice","map","item","key","handleNextClick","renderScrollDots","handleNextButtonClick","message","containsGib","i","buttons","label","onClick","renderButton","dots","size","Math","min","alert"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Feature, { FeatureType as FeatureTypes } from \"../../feature/Feature\";\nimport NewFeature from \"../../feature/NewFeature\";\nimport Drone from \"../../drone/Drone\";\nimport LoadingWidget from \"../../LoadingWidget\";\nimport { isGibberish } from \"../../../GibberishFilter\";\nimport { devices } from \"../../../devices.js\";\nimport Header from \"../../commons/header/Header\";\nimport Button from \"../../commons/Button\";\nimport { confirmAlert } from \"react-confirm-alert\"; // Import\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\n\nimport { theme } from \"../../../config/colorTheme\";\nimport MainHeader from \"../../commons/mainheader/MainHeader\";\n\nconst Wrapper = styled.div`\n  width: 100%;\n  position: relative;\n`;\n\nconst ContentWrapper = styled.div`\n  margin: auto;\n  position: relative;\n  width: 90vw;\n  padding-bottom: 10vw;\n`;\n\nconst DroneContainer = styled.div`\n  position: relative;\n  margin: auto;\n  height: 60vh;\n  overflow: visible;\n`;\n\nconst FeatureContainer = styled.div`\n  height: 38vh;\n  display: flex;\n`;\n\nconst CreateFeatureContainer = styled.div`\n  width: 30vw;\n  /* background-color:${theme.secondaryColor20} */\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nconst FeatureSetContainer = styled.div`\n  width: 70vw;\n  /* background-color:${theme.primaryColor20}; */\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nconst RowHeader = styled.h3`\n  font-size: 1.2vw;\n  font-family: \"Roboto\";\n  font-weight: 700;\n  text-transform: uppercase;\n  color: ${theme.black};\n  text-align: left;\n\n  @media ${devices.mobile} {\n    padding-top: 4vw;\n    font-size: 5vw;\n  }\n`;\n\nconst PaginationButton = styled.img`\n  width: 2vw;\n  height: 2vw;\n  cursor: pointer;\n  transition: transform 0.3s;\n  outline: none;\n  margin: auto 0.2vw;\n  &:hover {\n    transform: scale(1.1);\n  }\n\n  @media ${devices.mobile} {\n    width: 8vw;\n    height: 8vw;\n    max-height: 8vw;\n    font-size: 5vw;\n  }\n`;\n\nconst FeatureSet = styled.div`\n  display: flex;\n  justify-content: space-around;\n  @media ${devices.mobile} {\n    margin: auto;\n    width: 90vw;\n  }\n`;\n\nconst DotWrapper = styled.div`\n  width: 10vw;\n  height: 1.8vh;\n  margin: auto;\n  display: flex;\n  justify-content: space-around;\n\n  @media ${devices.mobile} {\n    width: 20vw;\n    height: 3vw;\n  }\n`;\n\nconst Dot = styled.div`\n  width: 1.5vh;\n  height: 1.5vh;\n  background-color: ${(props) =>\n    props.selected ? theme.secondaryColor : theme.lightGray};\n  border-radius: 5vw;\n\n  @media ${devices.mobile} {\n    width: 2vw;\n    height: 2vw;\n    margin: 4vw auto;\n  }\n`;\n\nconst ButtonWrapper = styled.div`\n  width: 20vw;\n  margin-top: 4vw;\n\n  float: right;\n`;\n\nvar APICalls = require(\"../../../utils/APICalls\");\n\nconst VISIBLE_FEATURES_COUNT = 3;\nconst FEATURE_SET_SIZE = 12;\n\nvar featurePool = [\n  { title: \"Night Vision\", description: \"Ability to  record videos in dark\" },\n  {\n    title: \"Thermal Cam\",\n    description:\n      \"A camera that can capture surface temperatures of objects below\",\n  },\n  {\n    title: \"Time Travel Cam\",\n    description:\n      \"A camera that capture videos of past, present and future incidents\",\n  },\n  { title: \"X-Ray\", description: \"Ability to see through physical objects\" },\n  { title: \"Night Visio 2\", description: \"Ability to  record videos in dark\" },\n  {\n    title: \"Thermal Cam 2\",\n    description:\n      \"A camera that can capture surface temperatures of objects below\",\n  },\n  {\n    title: \"Time Travel Cam 2\",\n    description:\n      \"A camera that capture videos of past, present and future incidents\",\n  },\n  { title: \"X-Ray 2\", description: \"Ability to see through physical objects\" },\n  { title: \"Night Visio 3\", description: \"Ability to  record videos in dark\" },\n  {\n    title: \"Thermal Cam 4\",\n    description:\n      \"A camera that can capture surface temperatures of objects below\",\n  },\n  {\n    title: \"Time Travel Cam 5\",\n    description:\n      \"A camera that capture videos of past, present and future incidents\",\n  },\n  { title: \"X-Ray 6\", description: \"Ability to see through physical objects\" },\n  { title: \"Night Visio 8\", description: \"Ability to  record videos in dark\" },\n  {\n    title: \"Thermal Cam 8\",\n    description:\n      \"A camera that can capture surface temperatures of objects below\",\n  },\n  {\n    title: \"Time Travel Cam 8\",\n    description:\n      \"A camera that capture videos of past, present and future incidents\",\n  },\n  { title: \"X-Ray 8\", description: \"Ability to see through physical objects\" },\n];\n\nclass AddFeaturesView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visiblefeatureIndex: 0,\n      visibleFetures: [],\n      featureSet: [],\n      selectedFetures: [],\n      response: null,\n    };\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    //fetch features, populate the feature pool, populate featureset\n    // fetch(\"/features/\")\n    //   .then(response => response.json())\n    //   .then(data => {\n    //     featurePool = data;\n    //     this.setFeatureSet(FEATURE_SET_SIZE);\n    //   });\n\n    //fetch the drone data using id\n    APICalls.readResponse(this.props.match.params.id, (data) => {\n      APICalls.readFeaturesOfTopic(data.topic._id, (data) => {\n        featurePool = data;\n        this.setFeatureSet(FEATURE_SET_SIZE);\n      });\n      this.setState({ response: data });\n    });\n  }\n\n  updateDrone() {\n    fetch(\"/responses/\" + this.state.response._id, {\n      method: \"PUT\",\n      body: JSON.stringify(this.state.response),\n      headers: {\n        Accept: \"application/json, text/plain, */*\",\n        \"Content-Type\": \"application/json\",\n        Mode: \"CORS\",\n      },\n    }).then((data) => {\n      console.log(data);\n    });\n  }\n\n  render() {\n    if (this.state.response == null && this.state.featureSet)\n      return <LoadingWidget></LoadingWidget>;\n    return (\n      <Wrapper>\n        <MainHeader\n          isSmall={true}\n          onClick={() => this.props.history.push(\"../../\")}\n        ></MainHeader>\n        <Header\n          text={\n            \"Add dream features to \" +\n            this.state.response.topic.name.toLowerCase()\n          }\n        ></Header>\n        <ContentWrapper>\n          <DroneContainer>\n            <Drone\n              featureClickHandler={this.handleFeaureClick.bind(this)}\n              editable={true}\n              drone={this.state.response}\n            ></Drone>\n          </DroneContainer>\n          <FeatureContainer>\n            <CreateFeatureContainer>\n              <RowHeader>+ Create new</RowHeader>\n              <NewFeature\n                topicId={this.state.response.topic._id}\n                clickHandler={this.handleAddNewFeatureClick.bind(this)}\n              />\n            </CreateFeatureContainer>\n            <FeatureSetContainer>\n              <RowHeader>or, select from what others have created</RowHeader>\n              <FeatureSet>\n                <PaginationButton\n                  src={require(\"./assets/left_arrow_icon.svg\")}\n                  onClick={() => this.handlePreviousClick()}\n                ></PaginationButton>\n                {this.state.featureSet\n                  .slice(\n                    this.state.visiblefeatureIndex,\n                    this.state.visiblefeatureIndex + VISIBLE_FEATURES_COUNT\n                  )\n                  .map(\n                    (item, key) => (\n                      <Feature\n                        name={item.name}\n                        description={item.description}\n                        featureType={FeatureTypes.selectable}\n                        clickHandler={this.handleFeaureClick.bind(this)}\n                        index={this.state.visiblefeatureIndex + key}\n                      ></Feature>\n                    ),\n                    this\n                  )}\n                <PaginationButton\n                  src={require(\"./assets/right_arrow_icon.svg\")}\n                  onClick={() => this.handleNextClick()}\n                ></PaginationButton>\n              </FeatureSet>\n              <DotWrapper>{this.renderScrollDots()}</DotWrapper>\n            </FeatureSetContainer>\n          </FeatureContainer>\n          <ButtonWrapper>\n            <Button\n              onClick={() => this.handleNextButtonClick()}\n              text={\"Next\"}\n              isDisabled={this.state.response.features.length <= 0}\n            ></Button>\n          </ButtonWrapper>\n        </ContentWrapper>\n      </Wrapper>\n    );\n  }\n\n  handleNextButtonClick() {\n    const message =\n      \"It looks like your submission includes some gibberish. Please make sure your answers are readable. If you believe this is a mistake on our part click skip without making any changes.\";\n\n    let containsGib = false;\n    let feature;\n    for (let i = 0; i < this.state.response.features.length; i++) {\n      feature = this.state.response.features[i];\n      if (isGibberish(feature.name, 2) || isGibberish(feature.description, 3)) {\n        containsGib = true;\n        break;\n      }\n    }\n    if (containsGib) {\n      confirmAlert({\n        title: \"We detected some gibberish!\",\n        message: message,\n        buttons: [\n          {\n            label: \"Skip\",\n            onClick: () =>\n              this.props.history.push(\n                \"../../prompt/\" + this.state.response._id\n              ),\n          },\n          {\n            label: \"Continue\",\n            onClick: () => {},\n          },\n        ],\n      });\n    } else {\n      this.props.history.push(\"../../prompt/\" + this.state.response._id);\n    }\n  }\n\n  renderButton() {\n    if (this.state.drone.features.length > 0) {\n      return (\n        <Button\n          onClick={() => {\n            this.props.history.push(\"../story/\" + this.state.drone._id);\n          }}\n        >\n          Next\n        </Button>\n      );\n    }\n    return null;\n  }\n\n  renderScrollDots() {\n    let dots = [];\n    let selected = false;\n    let index = this.state.visiblefeatureIndex;\n\n    const size = Math.min(this.state.featureSet.length, FEATURE_SET_SIZE);\n\n    for (let i = 0; i < size / VISIBLE_FEATURES_COUNT; i++) {\n      selected = i == index / VISIBLE_FEATURES_COUNT;\n      dots.push(<Dot selected={selected}></Dot>);\n    }\n    return dots;\n  }\n\n  handleFeaureClick = (feature) => {\n    let drone = this.state.response;\n    if (feature.featureType == FeatureTypes.selectable) {\n      if (drone.features.length >= 4) {\n        this.displayMaxFeaturesAlert();\n        return;\n      }\n      let featureSet = this.state.featureSet;\n      drone.features.push(featureSet[feature.index]);\n      if (featurePool.length) {\n        featureSet[feature.index] = featurePool.pop();\n        this.setState({ featureSet: featureSet });\n      } else {\n        //TODO: refresh pool\n      }\n    } else {\n      drone.features.splice(feature.index, 1); //remove button action\n    }\n    this.setState({ drone: drone });\n    this.updateDrone();\n  };\n\n  handleAddNewFeatureClick = (feature) => {\n    let drone = this.state.response;\n    if (drone.features.length >= 4) {\n      this.displayMaxFeaturesAlert();\n      return;\n    }\n    drone.features.push(feature);\n    this.setState({ response: drone });\n    this.updateDrone();\n  };\n\n  displayMaxFeaturesAlert() {\n    alert(\n      \"Your dream \" +\n        this.state.response.topic.name +\n        \" can have a maximum of 4 superpowers.\"\n    );\n  }\n\n  handleNextClick() {\n    let index = this.state.visiblefeatureIndex;\n    if (\n      index != null &&\n      index + VISIBLE_FEATURES_COUNT < this.state.featureSet.length\n    ) {\n      this.setState({ visiblefeatureIndex: index + VISIBLE_FEATURES_COUNT });\n    }\n  }\n\n  handlePreviousClick() {\n    let index = this.state.visiblefeatureIndex;\n    if (index != null && index - VISIBLE_FEATURES_COUNT >= 0) {\n      this.setState({ visiblefeatureIndex: index - VISIBLE_FEATURES_COUNT });\n    }\n  }\n\n  setFeatureSet(length) {\n    var featureSet = [];\n    for (var item of featurePool) {\n      // if(!isGibberish(item.title,4) && !isGibberish(item.description,8)){\n      featureSet.push(item);\n      if (featureSet.length >= length) {\n        break;\n      }\n      // }\n    }\n    //featureSet = featurePool.splice(0, length)\n    this.setState({ featureSet: featureSet });\n  }\n}\n\nexport default AddFeaturesView;\n"]},"metadata":{},"sourceType":"module"}